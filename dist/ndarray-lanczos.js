function a(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var r,t=/*#__PURE__*/a(require("ndarray")),e=function(a,r){if(a<=-r||a>=r)return 0;if(a>-1.1920929e-7&&a<1.1920929e-7)return 1;var t=a*Math.PI;return Math.sin(t)/t*Math.sin(t/r)/(t/r)},n=function(a,r,t,n,o,h,s,u){for(var f=Math.pow(2,u)-1,p=function(a){return Math.round(a*f)},i=o?2:3,c=1/t,l=Math.min(1,t),v=i/l,d=new s((Math.floor(2*(v+1))+2)*r),M=0,y=0;y<r;y++){for(var A=(y+.5)*c+n,_=Math.max(0,Math.floor(A-v)),w=Math.min(a-1,Math.ceil(A+v)),E=w-_+1,L=new h(E),N=new s(E),S=0,C=0,O=_;O<=w;O++){var Z=e((O+.5-A)*l,i);S+=Z,L[C]=Z,C++}for(var g=0,m=0;m<L.length;m++){var T=L[m]/S;g+=T,N[m]=p(T)}N[r>>1]+=p(1-g);for(var b=0;b<N.length&&0===N[b];)b++;for(var x=N.length-1;x>0&&0===N[x];)x--;var I=x-b+1;d[M++]=_+b,d[M++]=I,d.set(N.subarray(b,x+1),M),M+=I}return d},o=function(a,r,t,e){for(var n,o=a.shape[1],h=r.shape[0],s=Math.pow(2,8*r.data.BYTES_PER_ELEMENT)-1,u=Math.pow(2,e-1),f=2*u,p=Array(a.shape[2]),i=0;i<o;i++)for(var c=i,l=0,v=0;v<h;v++){for(var d=t[l++],M=0;M<a.shape[2];M++)p[M]=0;for(var y=t[l++];y>0;y--){for(var A=t[l++],_=0;_<a.shape[2];_++)p[_]=p[_]+A*a.get(d,i,_);d++}for(var w=0;w<a.shape[2];w++)r.set(v,c,w,(n=(p[w]+u)/f)<0?0:n>s?s:n)}};function h(a,e,h){if(3!==a.shape.length||3!==e.shape.length)throw new TypeError("Input and output must have exactly 3 dimensions (width, height and colorspace)");var s,u,f=a.shape,p=f[0],i=f[1],c=e.shape,l=c[0],v=c[1],d=l/p,M=v/i;switch(e.dtype){case"uint8_clamped":case"uint8":s=Float32Array,u=Int16Array;break;case"uint16":case"uint32":s=Float64Array,u=Int32Array;break;default:throw TypeError("Unsupported data type "+e.dtype)}var y=7*u.BYTES_PER_ELEMENT,A=n(p,l,d,0,h===r.LANCZOS_2,s,u,y),_=n(i,v,M,0,h===r.LANCZOS_2,s,u,y),w=t.default(new(0,e.data.constructor)(l*i*4),[i,l,4]),E=w.transpose(1,0),L=e.transpose(1,0);o(a,E,A,y),o(w,L,_,y)}!function(a){a[a.LANCZOS_3=3]="LANCZOS_3",a[a.LANCZOS_2=2]="LANCZOS_2"}(r||(r={})),exports.lanczos2=function(a,t){h(a,t,r.LANCZOS_2)},exports.lanczos3=function(a,t){h(a,t,r.LANCZOS_3)};
//# sourceMappingURL=ndarray-lanczos.js.map
